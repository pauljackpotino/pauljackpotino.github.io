<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RAPTOK Topsters</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <h1>RAPTOK Topsters</h1>

    <div class="topster-container" id="topster-container">
        <!-- Topsters будут добавлены сюда скриптом -->
    </div>

    <footer>
        &copy; 2024 Paul Jackpotino
    </footer>

    <script>
        // Замените YOUR_GOOGLE_SHEET_URL на ссылку, которую вы скопировали из Google Sheets
        const googleSheetUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRyrtnTK3TV19ewzp34R4L9bu-UV-o7B-d914dPddE005w363lBGXqZ25KNXk3ojsuAJj76pOMxc_y/pubhtml';

        async function loadTopsters() {
            try {
                const response = await fetch(googleSheetUrl);
                const html = await response.text();

                // Парсим HTML-код Google Sheets
                const parser = new DOMParser();
                const doc = parser.parseFromString(html, "text/html");

                // Находим таблицу с данными
                const table = doc.querySelector("table");

                // Если таблица найдена
                if (table) {
                    const tbody = table.querySelector("tbody");
                    const rows = tbody.querySelectorAll("tr");

                    // Получаем контейнер для топстеров (ПЕРЕМЕЩЕНО СЮДА!)
                    const topsterContainer = document.querySelector("#topster-container");

                    // Перебираем строки таблицы (начиная со второй строки, чтобы пропустить заголовки)
                    for (let i = 1; i < rows.length; i++) {
                        const row = rows[i];
                        const cells = row.querySelectorAll("td");

                        // Убедитесь, что в строке есть как минимум 2 ячейки (имя и ссылка на изображение)
                        if (cells.length >= 2) {
                            const name = cells[0].textContent;
                            const imageUrl = cells[1].textContent;

                            // Создаем элементы для топстера
                            const topsterDiv = document.createElement("div");
                            topsterDiv.classList.add("topster");

                            const img = document.createElement("img");
                            img.src = imageUrl;
                            img.alt = `Топстер пользователя ${name}`;
                            img.classList.add("topster-image"); // Добавляем класс для стилизации

                            const nameParagraph = document.createElement("p");
                            nameParagraph.textContent = `Автор: ${name}`;

                            // Добавляем элементы в контейнер топстера
                            topsterDiv.appendChild(img);
                            topsterDiv.appendChild(nameParagraph);

                            // Добавляем контейнер топстера в основной контейнер
                            topsterContainer.appendChild(topsterDiv);
                        } else {
                            console.error("Table row is missing data in Google Sheets");
                        }
                    }
                } else {
                    console.error("Table not found in Google Sheets");
                }
            } catch (error) {
                console.error("Error loading data from Google Sheets:", error);
            }
        }

        // Загружаем топстеры при загрузке страницы
        window.addEventListener("load", loadTopsters);
    </script>
</body>
</html>
